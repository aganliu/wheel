
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>小阿甘的快乐大转盘</title>
    <style>

#pointer {
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-bottom: 30px solid white;
    position: absolute;
    top: -40px;
    left: calc(50% - 15px);
    z-index: 2;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: white;
            text-align: center;
        }
        h1 {
            margin-top: 40px;
            font-size: 2em;
        }
        #wheel {
            margin: 30px auto;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            position: relative;
            background-color: #a678d6;
        }
        .segment {
            width: 50%;
            height: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: 0% 0%;
            background-color: transparent;
        }
        #spinButton {
            margin-top: 20px;
            padding: 10px 20px;
        }
        #result {
            margin-top: 20px;
            font-size: 1.2em;
        }
        #stats {
            margin-top: 20px;
            font-size: 0.9em;
            white-space: pre-line;
        }
    </style>
</head>
<body>
    <h1>🎡小阿甘的快乐大转盘🎡</h1>
    <canvas id="wheel" width="300" height="300"></canvas><br>
    <button id="spinButton">开始抽奖</button>
    <div id="result"></div>
    <div id="stats"></div>
    <script>
        const prizes = [
            "亲子故事", "周末外出探险", "下次小红花双倍奖励", "看动画片20分钟",
            "疯狂购物一次10元以内", "再来一次", "现场说一个小愿望", "玩小游戏一次（如爬树、轮滑、单车等）", "奖励大餐"
        ];
        const prizeShort = ["故事", "探险", "双倍花", "动画", "购物", "再抽", "小愿望", "小游戏", "大餐"];
        const stats = {};
        prizes.forEach(p => stats[p] = 0);

        const canvas = document.getElementById("wheel");
        const ctx = canvas.getContext("2d");
        const spinButton = document.getElementById("spinButton");
        const resultDiv = document.getElementById("result");
        const statsDiv = document.getElementById("stats");
        let angle = 0;

        function drawWheel() {
            const radius = canvas.width / 2;
            const num = prizes.length;
            const angleStep = 2 * Math.PI / num;
            for (let i = 0; i < num; i++) {
                ctx.beginPath();
                ctx.moveTo(radius, radius);
                ctx.arc(radius, radius, radius, i * angleStep, (i + 1) * angleStep);
                ctx.fillStyle = i % 2 === 0 ? "#9b59b6" : "#8e44ad";
                ctx.fill();
                ctx.save();
                ctx.translate(radius, radius);
                ctx.rotate((i + 0.5) * angleStep);
                ctx.textAlign = "right";
                ctx.fillStyle = "white";
                ctx.font = "14px Arial";
                ctx.fillText(prizeShort[i], radius - 10, 5);
                ctx.restore();
            }
        }

        function updateStats() {
            statsDiv.innerText = "奖项统计：\n" + prizes.map(p => `${p}: ${stats[p]} 次`).join("\n");
        }

        function spinWheel() {
            const randomIndex = Math.floor(Math.random() * prizes.length);
            stats[prizes[randomIndex]] += 1;
            updateStats();
            resultDiv.innerText = `中奖了！【${prizes[randomIndex]}】`;
        }

        drawWheel();
        updateStats();
        spinButton.onclick = spinWheel;
    </script>
</body>
</html>
